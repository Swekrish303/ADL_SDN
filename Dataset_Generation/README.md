# Fat Tree Topology in POX and Mininet for DDoS Dataset Generation

This repo contains the code for the implementation of the fat tree data center topology as described in [A Scalable, Commodity Data Center Network Architecture](http://ccr.sigcomm.org/online/files/p63-alfares.pdf) by Al-Fares et. al.

It implements routing algorithm described in the above paper. FakeARP address all ARP request based on Mininet topology implemented in topo.py

## Install Mininet and POX
Run `sudo pip3 install mininet` to install mininet

Run `git clone https://github.com/noxrepo/pox.git`

## Run POX
`custom_arp.py` and `installer.py` should be placed in `pox/ext` folder before running.

run `python3 pox.py custom_arp installer`.

Note that by default controller will run at 127.0.0.1:6633. Assuming POX and Mininet run on the same VM.  

## Run Mininet
`topo.py` should be in current directory when running this command. fattreetopo should be class in `topo.py`

Run `sudo mn -c` before running next command everytime to clean interfaces created by previous run. 

Run `sudo mn --custom topo.py --topo fattreetopo --controller remote --switch ovs`

Note that by default mininet will try to connet at 127.0.0.1:6653 but will search for other ports if no controller is found.

## Run Packet Sniffer
Wireshark was used in this case but command line version t-shark can also be used.

Run wireshark on VM. Start capture filter on following 16 interfaces. 

p{i}_s{j}_eth{k} where i = {0,1,2,3}, j = {0,1}, k = {0,1}

Example : p0_s0_eth0, ... ,p3_s1_eth1

Save captured data in .pcap files after running hping3 tool.

## Create Traffic
Traffic will be created using hping3 tool. It will be run on Mininet CLI.

Run this for Smurf attack: `p0_s0_h3 hping3 p3_s1_h2 --rand-source -2 --flood`

Run same command without `--flood` to emulate traffic in non-attack scenario

## CICFlowmeter
Run `git clone https://github.com/iPAS/TCPDUMP_and_CICFlowMeter.git` to download CICFLowmeter.

This is written in java so make java is installed in host machine/VM.

Go to `TCPDUMP_and_CICFlowMeter/CICFlowMeters/CICFlowMeter-3.0/bin/data`

Create two folders named `in` and `out` in this directory.

Put .pcap files generated by wireshark in `in` folder.

Run `cd TCPDUMP_and_CICFlowMeter/CICFlowMeters/CICFlowMeter-3.0/bin/`

Run `./CICFlowMeter`

Files will be saved in `out` folder created in previous step.
